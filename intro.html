<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sarveshwar Senthil Kumar | Professional Profile</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <style>
        :root {
            --primary: #00b4a3;
            --primary-dark: #008e80;
            --secondary: #2c3e50;
            --light: #ecf0f1;
            --dark: #111111;
            --accent: #ff6b6b;
            --text: #333333;
            --text-light: #7f8c8d;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body, html {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--dark);
            color: var(--light);
            line-height: 1.6;
            height: 100%;
            width: 100%;
            overflow: hidden;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-height: 100vh;
            padding: 1rem;
            margin: 0 auto;
            max-width: 1200px;
        }
        
        /* Fullscreen specific styles */
        :fullscreen .container,
        :-webkit-full-screen .container,
        :-moz-full-screen .container,
        :-ms-fullscreen .container {
            max-width: 95vw;
            padding: 2rem;
        }
        
        :fullscreen .profile-image-container,
        :-webkit-full-screen .profile-image-container,
        :-moz-full-screen .profile-image-container,
        :-ms-fullscreen .profile-image-container {
            height: 40vh;
            min-height: 300px;
        }
        
        :fullscreen .profile-image,
        :-webkit-full-screen .profile-image,
        :-moz-full-screen .profile-image,
        :-ms-fullscreen .profile-image {
            width: 100%;
            max-width: 400px;
        }
        
        :fullscreen .qr-code-container,
        :-webkit-full-screen .qr-code-container,
        :-moz-full-screen .qr-code-container,
        :-ms-fullscreen .qr-code-container {
            width: 150px;
            height: 150px;
        }
        
        :fullscreen .qr-code,
        :-webkit-full-screen .qr-code,
        :-moz-full-screen .qr-code,
        :-ms-fullscreen .qr-code {
            width: 140px;
            height: 140px;
        }
        
        header {
            flex-shrink: 0;
            padding: 0.5rem 0;
            margin-bottom: 0.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            flex-grow: 1;
            overflow: hidden;
            height: calc(100vh - 100px);
        }
        
        .profile-section {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            overflow: hidden;
            padding-right: 1rem;
        }
        
        .profile-image-container {
            display: flex;
            justify-content: flex-start;
            align-items: center;
            margin-bottom: 1rem;
            height: 45vh;
            min-height: 300px;
            width: 100%;
        }
        
        .profile-image {
            width: 90%;
            height: 100%;
            max-width: 400px;
            border-radius: 12px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            border: 4px solid var(--primary);
            object-fit: cover;
            object-position: center;
        }
        
        .profile-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--primary);
            line-height: 1.2;
        }
        
        .profile-subtitle {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 0.8rem;
            color: var(--light);
            line-height: 1.3;
        }
        
        .profile-description {
            font-size: 0.95rem;
            margin-bottom: 1rem;
            color: var(--light);
            opacity: 0.9;
            line-height: 1.5;
        }
        
        .links-section {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            overflow-y: auto;
            padding-right: 0.5rem;
        }
        
        .links-section::-webkit-scrollbar {
            width: 6px;
        }
        
        .links-section::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }
        
        .links-section::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }
        
        .qr-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
            width: 100%;
        }
        
        .qr-card {
            background: linear-gradient(145deg, #1e1e1e, #2a2a2a);
            border-radius: 10px;
            padding: 0.8rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .qr-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.3);
        }
        
        .qr-code-container {
            width: 120px;
            height: 120px;
            margin: 0 auto 0.6rem;
            background: white;
            padding: 6px;
            border-radius: 6px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .qr-code {
            width: 110px;
            height: 110px;
        }
        
        .qr-title {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 0.3rem;
            color: var(--primary);
        }
        
        .qr-link {
            font-size: 0.75rem;
            color: var(--text-light);
            word-break: break-all;
            padding: 0 0.3rem;
            margin-bottom: 0.3rem;
        }
        
        .contact-info {
            background: linear-gradient(145deg, #1e1e1e, #2a2a2a);
            border-radius: 10px;
            padding: 1rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            margin-top: auto;
        }
        
        .contact-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.8rem;
            color: var(--primary);
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.6rem;
        }
        
        .contact-icon {
            width: 32px;
            height: 32px;
            background-color: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 0.8rem;
            color: white;
            font-size: 0.9rem;
            flex-shrink: 0;
        }
        
        .contact-text {
            font-size: 0.9rem;
        }
        
        .contact-link {
            color: var(--light);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .contact-link:hover {
            color: var(--primary);
            text-decoration: underline;
        }
        
        footer {
            flex-shrink: 0;
            text-align: center;
            padding: 0.8rem 0;
            font-size: 0.8rem;
            color: var(--text-light);
        }
        
        /* Responsive adjustments */
        @media (max-width: 992px) {
            .profile-image-container {
                height: 40vh;
                min-height: 280px;
            }
            
            .profile-image {
                width: 85%;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .main-content {
                grid-template-columns: 1fr;
                height: auto;
                min-height: calc(100vh - 100px);
            }
            
            .profile-section {
                padding-right: 0;
                order: 1;
            }
            
            .links-section {
                order: 2;
                padding-top: 0;
            }
            
            .profile-image-container {
                height: 35vh;
                min-height: 250px;
                justify-content: center;
            }
            
            .profile-image {
                width: 80%;
                max-width: 350px;
            }
            
            .profile-title,
            .profile-subtitle,
            .profile-description {
                text-align: center;
            }
            
            .qr-grid {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 0.8rem;
            }
            
            .profile-image-container {
                height: 30vh;
                min-height: 220px;
            }
            
            .profile-image {
                width: 90%;
            }
            
            .profile-title {
                font-size: 1.6rem;
            }
            
            .qr-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animated {
            animation: fadeIn 0.6s ease forwards;
        }
        
        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        .delay-4 { animation-delay: 0.4s; }

        /* Fullscreen notification */
        .fullscreen-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 180, 163, 0.9);
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        
        /* Fullscreen toggle button */
        .fullscreen-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background-color: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 999;
            transition: all 0.3s ease;
        }
        
        .fullscreen-toggle:hover {
            background-color: var(--primary-dark);
            transform: scale(1.1);
        }
        
        .fullscreen-toggle i {
            font-size: 1.2rem;
        }

        /* QR Input Modal */
        .qr-input-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .qr-input-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .qr-input-container {
            background-color: var(--dark);
            padding: 2rem;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .qr-input-modal.active .qr-input-container {
            transform: translateY(0);
        }

        .qr-input-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
            text-align: center;
        }

        .qr-input-field {
            width: 100%;
            padding: 1rem;
            margin-bottom: 1rem;
            border: 2px solid var(--primary);
            border-radius: 6px;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .qr-input-field:focus {
            outline: none;
            border-color: var(--accent);
        }

        .qr-input-label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: var(--light);
        }

        .qr-input-buttons {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 1rem;
        }

        .qr-input-button {
            flex: 1;
            padding: 0.8rem;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .qr-input-button.generate {
            background-color: var(--primary);
            color: white;
        }

        .qr-input-button.generate:hover {
            background-color: var(--primary-dark);
        }

        .qr-input-button.cancel {
            background-color: transparent;
            border: 2px solid var(--text-light);
            color: var(--text-light);
        }

        .qr-input-button.cancel:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        /* Custom QR card delete button */
        .qr-card-custom {
            position: relative;
        }

        .qr-delete-button {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 24px;
            height: 24px;
            background-color: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.7rem;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .qr-card-custom:hover .qr-delete-button {
            opacity: 1;
        }

        /* Custom QR notification */
        .custom-qr-notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--primary);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            font-weight: 600;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .custom-qr-notification.show {
            opacity: 1;
        }

        /* Edit QR name button */
        .qr-edit-button {
            position: absolute;
            top: 5px;
            left: 5px;
            width: 24px;
            height: 24px;
            background-color: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.7rem;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .qr-card-custom:hover .qr-edit-button {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo animated">Sarveshwar Senthil Kumar</div>
        </header>
        
        <main class="main-content">
            <section class="profile-section">
                <div class="profile-image-container animated">
                    <img src="https://media.licdn.com/dms/image/v2/D5603AQH-AxEj1SuCZg/profile-displayphoto-shrink_400_400/B56ZWnIS8KGQAg-/0/1742265725306?e=1757548800&v=beta&t=pMG7sWQpRotGso5CZzp9ArKy4VYmP6CFjQtf5xzWvEM" alt="Sarveshwar Senthil Kumar" class="profile-image">
                </div>
                
                <h1 class="profile-title animated delay-1">Full-Stack Software Engineer</h1>
                <h2 class="profile-subtitle animated delay-1">Developer | Chess Enthusiast | Community Builder</h2>
                
                <p class="profile-description animated delay-2">
                    I'm a software developer with a passion for creating practical, impactful tools. My work spans full-stack development, AI integration, and collaborative projects that solve real-world problems. I've led and contributed to initiatives in education, productivity, and civic engagement, and I'm always eager to learn, experiment, and build. Outside of tech, I'm an active chess competitor and organizer, using the game to connect with and inspire others.
                </p>
            </section>
            
            <section class="links-section">
                <div class="qr-grid" id="qrGrid">
                    <div class="qr-card animated delay-1">
                        <div class="qr-code-container">
                            <canvas id="qr-github" class="qr-code"></canvas>
                        </div>
                        <h3 class="qr-title">GitHub</h3>
                        <div class="qr-link">github.com/SarveshwarSenthilKumar</div>
                    </div>
                    
                    <div class="qr-card animated delay-2">
                        <div class="qr-code-container">
                            <canvas id="qr-linkedin" class="qr-code"></canvas>
                        </div>
                        <h3 class="qr-title">LinkedIn</h3>
                        <div class="qr-link">linkedin.com/in/sarveshwarsenthilkumar</div>
                    </div>
                    
                    <div class="qr-card animated delay-3">
                        <div class="qr-code-container">
                            <canvas id="qr-resume" class="qr-code"></canvas>
                        </div>
                        <h3 class="qr-title">Resume</h3>
                        <div class="qr-link">https://sarveshwarsenthilkumar.github.io#resume</div>
                    </div>
                    
                    <div class="qr-card animated delay-4">
                        <div class="qr-code-container">
                            <canvas id="qr-portfolio" class="qr-code"></canvas>
                        </div>
                        <h3 class="qr-title">Portfolio</h3>
                        <div class="qr-link">sarveshwarsenthilkumar.github.io</div>
                    </div>
                </div>
                
                <div class="contact-info animated delay-4">
                    <h3 class="contact-title">Direct Contact</h3>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div class="contact-text">
                            <a href="mailto:Sarveshwar313@gmail.com" class="contact-link">Sarveshwar313@gmail.com</a>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div class="contact-text">
                            <a href="tel:437-450-4378" class="contact-link">+1 (437) 450-4378</a>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <footer class="animated delay-4">
            © 2025 Sarveshwar Senthil Kumar | Press 'i' to add custom QR code
        </footer>
    </div>

    <!-- Fullscreen notification -->
    <div class="fullscreen-notification" id="fullscreenNotification">
        Press F to toggle fullscreen
    </div>

    <!-- Custom QR notification -->
    <div class="custom-qr-notification" id="customQrNotification">
        Custom QR code added successfully!
    </div>

    <!-- Fullscreen toggle button -->
    <div class="fullscreen-toggle" id="fullscreenToggle" title="Toggle Fullscreen">
        <i class="fas fa-expand"></i>
    </div>

    <!-- QR Input Modal -->
    <div class="qr-input-modal" id="qrInputModal">
        <div class="qr-input-container">
            <h3 class="qr-input-title">Create Custom QR Code</h3>
            
            <label for="qrInputUrl" class="qr-input-label">URL:</label>
            <input type="text" class="qr-input-field" id="qrInputUrl" placeholder="Enter URL..." autofocus>
            
            <label for="qrInputName" class="qr-input-label">Display Name:</label>
            <input type="text" class="qr-input-field" id="qrInputName" placeholder="Enter display name (optional)">
            
            <div class="qr-input-buttons">
                <button class="qr-input-button cancel" id="qrInputCancel">Cancel</button>
                <button class="qr-input-button generate" id="qrInputGenerate">Generate QR</button>
            </div>
        </div>
    </div>

    <!-- Edit Name Modal -->
    <div class="qr-input-modal" id="editNameModal">
        <div class="qr-input-container">
            <h3 class="qr-input-title">Edit QR Code Name</h3>
            <input type="text" class="qr-input-field" id="editNameField" placeholder="Enter new name...">
            <div class="qr-input-buttons">
                <button class="qr-input-button cancel" id="editNameCancel">Cancel</button>
                <button class="qr-input-button generate" id="editNameSave">Save</button>
            </div>
        </div>
    </div>

    <script>
        // Generate QR codes with error handling
        document.addEventListener('DOMContentLoaded', function() {
            // Store custom QR codes in localStorage
            const STORAGE_KEY = 'customQRCodes';
            let customQRCodes = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
            let currentlyEditingId = null;
            
            // DOM elements
            const qrGrid = document.getElementById('qrGrid');
            const qrInputModal = document.getElementById('qrInputModal');
            const qrInputUrl = document.getElementById('qrInputUrl');
            const qrInputName = document.getElementById('qrInputName');
            const qrInputGenerate = document.getElementById('qrInputGenerate');
            const qrInputCancel = document.getElementById('qrInputCancel');
            const customQrNotification = document.getElementById('customQrNotification');
            const editNameModal = document.getElementById('editNameModal');
            const editNameField = document.getElementById('editNameField');
            const editNameSave = document.getElementById('editNameSave');
            const editNameCancel = document.getElementById('editNameCancel');
            const linksSection = document.querySelector('.links-section');
            
            function generateQRCode(elementId, url) {
                try {
                    const canvas = document.getElementById(elementId);
                    QRCode.toCanvas(canvas, url, {
                        width: 110,
                        margin: 1,
                        color: {
                            dark: '#000000',
                            light: '#ffffff'
                        }
                    }, function(error) {
                        if (error) {
                            console.error('QR Code generation error:', error);
                            canvas.parentElement.innerHTML = '<div style="color:red; font-size:0.7rem;">QR Error</div>';
                        }
                    });
                } catch (e) {
                    console.error('QR Code initialization error:', e);
                }
            }

            // Generate all initial QR codes
            generateQRCode('qr-github', 'https://github.com/SarveshwarSenthilKumar');
            generateQRCode('qr-linkedin', 'https://www.linkedin.com/in/sarveshwarsenthilkumar/');
            generateQRCode('qr-resume', 'https://sarveshwarsenthilkumar.github.io#resume');
            generateQRCode('qr-portfolio', 'https://sarveshwarsenthilkumar.github.io');
            
            // Load custom QR codes from storage
            function loadCustomQRCodes() {
                customQRCodes.forEach((qr, index) => {
                    addCustomQRCard(qr.url, qr.title, `custom-qr-${index}`, qr.elementId);
                });
            }
            
            // Add a custom QR card to the grid
            function addCustomQRCard(url, title = 'Custom Link', elementId = `custom-qr-${Date.now()}`, storedElementId = null) {
                const finalElementId = storedElementId || elementId;
                const qrCard = document.createElement('div');
                qrCard.className = 'qr-card qr-card-custom animated';
                qrCard.innerHTML = `
                    <div class="qr-code-container">
                        <canvas id="${finalElementId}" class="qr-code"></canvas>
                    </div>
                    <h3 class="qr-title">${title}</h3>
                    <div class="qr-link">${url.length > 30 ? url.substring(0, 30) + '...' : url}</div>
                    <div class="qr-delete-button" data-id="${finalElementId}">
                        <i class="fas fa-times"></i>
                    </div>
                    <div class="qr-edit-button" data-id="${finalElementId}">
                        <i class="fas fa-pencil-alt"></i>
                    </div>
                `;
                
                qrGrid.appendChild(qrCard);
                generateQRCode(finalElementId, url);
                
                // Add delete functionality
                const deleteBtn = qrCard.querySelector('.qr-delete-button');
                deleteBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    deleteCustomQRCard(finalElementId);
                });
                
                // Add edit functionality
                const editBtn = qrCard.querySelector('.qr-edit-button');
                editBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    showEditNameModal(finalElementId, title);
                });
                
                // Make QR card clickable
                qrCard.addEventListener('click', function() {
                    window.open(url, '_blank');
                });
                
                // Animate the new card
                setTimeout(() => {
                    qrCard.style.opacity = '1';
                    qrCard.style.transform = 'translateY(0)';
                }, 10);
                
                // Update grid layout
                updateQrGridLayout();
                
                return finalElementId;
            }
            
            // Show edit name modal
            function showEditNameModal(elementId, currentName) {
                currentlyEditingId = elementId;
                editNameField.value = currentName;
                editNameModal.classList.add('active');
                editNameField.focus();
            }
            
            // Hide edit name modal
            function hideEditNameModal() {
                editNameModal.classList.remove('active');
                editNameField.value = '';
                currentlyEditingId = null;
            }
            
            // Save edited name
            function saveEditedName() {
                const newName = editNameField.value.trim();
                if (!newName) {
                    alert('Please enter a valid name');
                    return;
                }
                
                if (!currentlyEditingId) return;
                
                // Update in DOM
                const titleElement = document.querySelector(`#${currentlyEditingId}`).closest('.qr-card').querySelector('.qr-title');
                titleElement.textContent = newName;
                
                // Update in storage
                customQRCodes = customQRCodes.map(qr => {
                    if (qr.elementId === currentlyEditingId) {
                        return {...qr, title: newName};
                    }
                    return qr;
                });
                localStorage.setItem(STORAGE_KEY, JSON.stringify(customQRCodes));
                
                hideEditNameModal();
                showCustomNotification('Name updated successfully!');
            }
            
            // Delete a custom QR card
            function deleteCustomQRCard(elementId) {
                // Remove from DOM
                const card = document.querySelector(`#${elementId}`).closest('.qr-card');
                card.style.transform = 'scale(0.9)';
                card.style.opacity = '0';
                setTimeout(() => {
                    card.remove();
                    // Update grid layout after removal
                    updateQrGridLayout();
                }, 300);
                
                // Remove from storage
                customQRCodes = customQRCodes.filter(qr => qr.elementId !== elementId);
                localStorage.setItem(STORAGE_KEY, JSON.stringify(customQRCodes));
                
                showCustomNotification('QR code removed');
            }
            
            // Show custom notification
            function showCustomNotification(message) {
                customQrNotification.textContent = message;
                customQrNotification.classList.add('show');
                setTimeout(() => {
                    customQrNotification.classList.remove('show');
                }, 3000);
            }
            
            // Update QR grid layout to ensure everything fits
            function updateQrGridLayout() {
                // Adjust QR code sizes based on number of items
                const qrCards = document.querySelectorAll('.qr-card');
                const qrCount = qrCards.length;
                
                // Calculate optimal size based on number of QR codes
                let qrSize = 110;
                let containerSize = 120;
                
                if (qrCount > 4) {
                    // For more than 4 QR codes, make them smaller
                    qrSize = 90;
                    containerSize = 100;
                    
                    // Adjust font sizes for smaller cards
                    document.querySelectorAll('.qr-title').forEach(el => {
                        el.style.fontSize = '0.85rem';
                    });
                    document.querySelectorAll('.qr-link').forEach(el => {
                        el.style.fontSize = '0.65rem';
                    });
                } else {
                    // Reset to default sizes
                    document.querySelectorAll('.qr-title').forEach(el => {
                        el.style.fontSize = '0.95rem';
                    });
                    document.querySelectorAll('.qr-link').forEach(el => {
                        el.style.fontSize = '0.75rem';
                    });
                }
                
                // Apply the sizes
                document.querySelectorAll('.qr-code-container').forEach(el => {
                    el.style.width = `${containerSize}px`;
                    el.style.height = `${containerSize}px`;
                });
                
                document.querySelectorAll('.qr-code').forEach(el => {
                    el.style.width = `${qrSize}px`;
                    el.style.height = `${qrSize}px`;
                });
                
                // Ensure the links section is scrollable if content overflows
                linksSection.style.overflowY = qrCount > 4 ? 'auto' : 'hidden';
            }
            
            // Show QR input modal
            function showQRInputModal() {
                qrInputModal.classList.add('active');
                qrInputUrl.focus();
            }
            
            // Hide QR input modal
            function hideQRInputModal() {
                qrInputModal.classList.remove('active');
                qrInputUrl.value = '';
                qrInputName.value = '';
            }
            
            // Generate custom QR code
            function generateCustomQRCode() {
                const url = qrInputUrl.value.trim();
                const name = qrInputName.value.trim() || 'Custom Link';
                
                if (!url) {
                    alert('Please enter a valid URL');
                    return;
                }
                
                // Validate URL format
                let validUrl = url;
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    validUrl = `http://${url}`;
                }
                
                try {
                    new URL(validUrl);
                } catch (e) {
                    alert('Please enter a valid URL');
                    return;
                }
                
                const elementId = `custom-qr-${Date.now()}`;
                
                // Add to storage
                customQRCodes.push({ url: validUrl, title: name, elementId });
                localStorage.setItem(STORAGE_KEY, JSON.stringify(customQRCodes));
                
                // Add to DOM
                addCustomQRCard(validUrl, name, elementId);
                
                // Show notification
                showCustomNotification('Custom QR code added successfully!');
                
                hideQRInputModal();
            }
            
            // Event listeners
            qrInputGenerate.addEventListener('click', generateCustomQRCode);
            qrInputCancel.addEventListener('click', hideQRInputModal);
            editNameSave.addEventListener('click', saveEditedName);
            editNameCancel.addEventListener('click', hideEditNameModal);
            
            // Handle Enter/Escape keys in modals
            qrInputUrl.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    generateCustomQRCode();
                } else if (e.key === 'Escape') {
                    hideQRInputModal();
                }
            });
            
            editNameField.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    saveEditedName();
                } else if (e.key === 'Escape') {
                    hideEditNameModal();
                }
            });
            
            // Close modals when clicking outside
            qrInputModal.addEventListener('click', function(e) {
                if (e.target === qrInputModal) {
                    hideQRInputModal();
                }
            });
            
            editNameModal.addEventListener('click', function(e) {
                if (e.target === editNameModal) {
                    hideEditNameModal();
                }
            });
            
            // Load any existing custom QR codes
            loadCustomQRCodes();
            
            // Initial layout update
            updateQrGridLayout();
            
            // Fullscreen functionality
            const fullscreenNotification = document.getElementById('fullscreenNotification');
            const fullscreenToggle = document.getElementById('fullscreenToggle');
            let notificationTimeout;

            function showNotification() {
                clearTimeout(notificationTimeout);
                fullscreenNotification.style.opacity = '1';
                notificationTimeout = setTimeout(() => {
                    fullscreenNotification.style.opacity = '0';
                }, 2000);
            }

            function toggleFullScreen() {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch(err => {
                        console.error(`Error attempting to enable fullscreen: ${err.message}`);
                    });
                    fullscreenToggle.innerHTML = '<i class="fas fa-compress"></i>';
                } else {
                    if (document.exitFullscreen) {
                        document.exitFullscreen();
                        fullscreenToggle.innerHTML = '<i class="fas fa-expand"></i>';
                    }
                }
            }

            // Show notification on first interaction
            document.addEventListener('click', function firstInteraction() {
                showNotification();
                document.removeEventListener('click', firstInteraction);
            }, { once: true });

            // Toggle fullscreen on F key press or button click
            document.addEventListener('keydown', (e) => {
                if (e.key.toLowerCase() === 'f') {
                    toggleFullScreen();
                    showNotification();
                } else if (e.key.toLowerCase() === 'i') {
                    // Show QR input modal when 'i' is pressed
                    showQRInputModal();
                }
            });

            fullscreenToggle.addEventListener('click', () => {
                toggleFullScreen();
                showNotification();
            });

            // Update notification text based on fullscreen state
            document.addEventListener('fullscreenchange', () => {
                if (document.fullscreenElement) {
                    fullscreenNotification.textContent = 'Press F to exit fullscreen';
                    fullscreenToggle.innerHTML = '<i class="fas fa-compress"></i>';
                } else {
                    fullscreenNotification.textContent = 'Press F to toggle fullscreen';
                    fullscreenToggle.innerHTML = '<i class="fas fa-expand"></i>';
                }
                showNotification();
                
                // Update layout when entering/exiting fullscreen
                updateQrGridLayout();
            });

            // Update fullscreen button icon when exiting via ESC
            document.addEventListener('fullscreenerror', () => {
                fullscreenToggle.innerHTML = '<i class="fas fa-expand"></i>';
            });
            
            // Handle window resize
            window.addEventListener('resize', () => {
                updateQrGridLayout();
            });
        });
    </script>
</body>
</html>